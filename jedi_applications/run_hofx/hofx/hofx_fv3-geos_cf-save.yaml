time window:
  begin: 2020-09-03T15:00:00Z
  length: PT6H
forecast length: PT6H
geometry:
  fms initialization:
    namelist filename: geometry_input/fmsmpp.nml
  akbk: geometry_input/akbk72.nc4
  npx: 13
  npy: 13
  npz: 72
  field metadata override: geometry_input/geos_cf.yaml

#model:
#  name: PSEUDO
#  filetype: cube sphere history
#  datapath: geos_c12
#  filename: geos_cf.bkg.%yyyy%mm%dd_%hh%MM%ssz.nc4
#  tstep: PT3H


model:
  name: FV3LM
  namelist filename: geometry_input/input_geos_c12.nml
  tstep: PT15M
  lm_do_dyn: 1
  lm_do_trb: 0
  lm_do_mst: 0
  model variables: [u,v,ua,va,T,SPHU,DELP,NO2]

initial condition:
  datetime: 2020-09-03T15:00:00Z
  filetype: cube sphere history
  datapath: geos_c12
  filename: geos_cf.bkg.%yyyy%mm%dd_%hh%MM%ssz.nc4
  state variables: [u,v,ua,va,DELP,volume_mixing_ratio_of_no2,volume_mixing_ratio_of_no,volume_mixing_ratio_of_o3,PS,SPHU]

observations:
  observers:
  - obs space:
      name: NO2
      obsdatain:
        engine:
          type: H5File
          obsfile: obs/tropomi_no2_tropo_2020090318_m.nc4
      obsdataout:
        engine:
          type: H5File
          obsfile: output/fb.tropomi_no2_geos_2020090318_m.nc
      simulated variables: [nitrogendioxideColumn]
    obs operator:
      name: ColumnRetrieval
      nlayers_retrieval: 34
      tracer variables: [volume_mixing_ratio_of_no2]
      isApriori: false
      isAveragingKernel: true
      stretchVertices: topbottom #options: top, bottom, topbottom, none
    obs error:
      covariance model: diagonal
