time window:
  begin: 2021-08-05T06:00:00Z
  length: PT6H
forecast length: PT6H
geometry:
  fms initialization:
    namelist filename: geometry_input/fmsmpp.nml
  akbk: geometry_input/akbk72.nc4
  npx: 13
  npy: 13
  npz: 72
  field metadata override: geometry_input/geos_cf.yaml

#model:
#  name: PSEUDO
#  filetype: cube sphere history
#  datapath: geos_c12
#  filename: geoscf_jedi.%yyyy%mm%dd_%hh%MMz.nc4
#  tstep: PT3H


model:
  name: FV3LM
  namelist filename: geometry_input/input_geos_c12.nml
  tstep: PT15M
  lm_do_dyn: 1
  lm_do_trb: 0
  lm_do_mst: 0
  #model variables: [u,v,ua,va,T,Q,DELP,NO2]
  model variables: [ua,va,T,Q,DELP,NO2] #remove u,v from model variables, phis is required, all variables in model variables must be in state variables too. 

initial condition:
  datetime: 2021-08-05T06:00:00Z
  filetype: cube sphere history
  datapath: geos_c12
  filename: geoscf_jedi.%yyyy%mm%dd_%hh%MMz.nc4
  state variables: [u,v,ua,va,DELP,T,Q,volume_mixing_ratio_of_no2]

observations:
  observers:
  - obs space:
      name: NO2
      obsdatain:
        engine:
          type: H5File
          obsfile: obs/tropomi_no2_tropo_202108050900.nc4
      obsdataout:
        engine:
          type: H5File
          obsfile: output/fb.tropomi_no2_tropo_202108050900.nc
      simulated variables: [nitrogendioxideColumn]
    obs operator:
      name: ColumnRetrieval
      nlayers_retrieval: 34
      tracer variables: [volume_mixing_ratio_of_no2]
      isApriori: false
      isAveragingKernel: true
      stretchVertices: topbottom #options: top, bottom, topbottom, none
    obs error:
      covariance model: diagonal
